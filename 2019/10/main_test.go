package main

import (
	"strings"
	"testing"
)

var tests = []struct {
	astmap   string
	loc      Asteroid
	detected int
}{
	{
		`.#..#
.....
#####
....#
...##`,
		Asteroid{3, 4},
		8,
		//
	},

	{
		`......#.#.
#..#.#....
..#######.
.#.#.###..
.#..#.....
..#....#.#
#..#....#.
.##.#..###
##...#..#.
.#....####`,
		Asteroid{5, 8},
		33,
	},

	{
		`#.#...#.#.
.###....#.
.#....#...
##.#.#.#.#
....#.#.#.
.##..###.#
..#...##..
..##....##
......#...
.####.###.`,
		Asteroid{1, 2},
		35,
	},

	{
		`.#..#..###
####.###.#
....###.#.
..###.##.#
##.##.#.#.
....###..#
..#.#..#.#
#..#.#.###
.##...##.#
.....#.#..`,
		Asteroid{6, 3},
		41,
	},
	{
		`.#..##.###...#######
##.############..##.
.#.######.########.#
.###.#######.####.#.
#####.##.#.##.###.##
..#####..#.#########
####################
#.####....###.#.#.##
##.#################
#####.##.###..####..
..######..##.#######
####.##.####...##..#
.#####..#.######.###
##...#.##########...
#.##########.#######
.####.#.###.###.#.##
....##.##.###..#####
.#.#.###########.###
#.#.#.#####.####.###
###.##.####.##.#..##`,
		Asteroid{11, 13},
		210,
	},
}

func TestParser(t *testing.T) {

	for _, tst := range tests {
		m := parseInput(strings.NewReader(tst.astmap))
		// Basic check: the winner asteroid should exist in the structure
		if _, ok := m[tst.loc]; !ok {
			t.Errorf("Asteroid %v should exist in the map (not found)", tst.loc)
		}
	}
}
